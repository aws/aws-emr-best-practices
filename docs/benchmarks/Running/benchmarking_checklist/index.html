<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-benchmarks/Running/benchmarking_checklist" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.0">
<title data-rh="true">Benchmarking Checklist | AWS Open Data Analytics</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://aws.github.io/aws-open-data-analytics/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://aws.github.io/aws-open-data-analytics/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://aws.github.io/aws-open-data-analytics/docs/benchmarks/Running/benchmarking_checklist"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Benchmarking Checklist | AWS Open Data Analytics"><meta data-rh="true" name="description" content="Environment and Infrastructure Checklist"><meta data-rh="true" property="og:description" content="Environment and Infrastructure Checklist"><link data-rh="true" rel="icon" href="/aws-open-data-analytics/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://aws.github.io/aws-open-data-analytics/docs/benchmarks/Running/benchmarking_checklist"><link data-rh="true" rel="alternate" href="https://aws.github.io/aws-open-data-analytics/docs/benchmarks/Running/benchmarking_checklist" hreflang="en"><link data-rh="true" rel="alternate" href="https://aws.github.io/aws-open-data-analytics/docs/benchmarks/Running/benchmarking_checklist" hreflang="x-default"><link rel="stylesheet" href="/aws-open-data-analytics/assets/css/styles.a4bba1a8.css">
<script src="/aws-open-data-analytics/assets/js/runtime~main.08db138c.js" defer="defer"></script>
<script src="/aws-open-data-analytics/assets/js/main.a3f3faa3.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/aws-open-data-analytics/"><div class="navbar__logo"><img src="/aws-open-data-analytics/img/logo.svg" alt="AWS Open Data Analytic" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/aws-open-data-analytics/img/logo.svg" alt="AWS Open Data Analytic" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">AWS Open Data Analytics</b></a><a class="navbar__item navbar__link" href="/aws-open-data-analytics/docs/bestpractices/">Best Practices</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/aws-open-data-analytics/docs/benchmarks/introduction">Benchmarks</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/aws-open-data-analytics/docs/benchmarks/introduction">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/aws-open-data-analytics/docs/benchmarks/price_performance">Price-Performance</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/aws-open-data-analytics/docs/benchmarks/benchmarking_variables">Benchmarking Variables</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/aws-open-data-analytics/docs/benchmarks/Analyzing/read_spark_UI">Analyzing</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/aws-open-data-analytics/docs/benchmarks/Running/benchmarking_checklist">Running</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/aws-open-data-analytics/docs/benchmarks/Running/benchmarking_checklist">Benchmarking Checklist</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aws-open-data-analytics/docs/benchmarks/Running/setting_up_environment">Setting Up Your Environment</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/aws-open-data-analytics/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Running</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Benchmarking Checklist</span><meta itemprop="position" content="2"></li></ul></nav><div class="theme-doc-markdown markdown"><h1>Benchmarking Checklist</h1>
<p>##Environment and Infrastructure Checklist**</p>
<p>The following checklist assumes you are running benchmarks across deployment models (EC2 vs EKS vs Serverless) or vendors (EMR vs Databricks vs OSS).  Comparing at the deployment model or vendor level takes into consideration a number of variables such as runtime performance, scaling and pricing model.</p>
<p>If running a benchmark for other purposes such as difference in hardware within the same deployment model, items in the checklist will not apply.</p>
<table><thead><tr><th>Checklist</th><th></th><th>Notes</th></tr></thead><tbody><tr><td>Are all instances On Demand</td><td>ğŸ”²</td><td>Spot interruptions are unpredictable and impacts price-performance. Only use spot when taking into consideration how your benchmark handles spot interruptions and getting spot capacity. Deployment models EMR on EC2 have product differentiators that select instances with are most likely to not get interrupted.</td></tr><tr><td>Are all instances the same family, size and generation</td><td>ğŸ”²</td><td>The total amount of compute (vCPU and Memory) should be consistent across benchmark runs. Compute will determine the performance of the application. Additionally, instances can vary in network performance. Additionally, if using Karpenter or Instancefleet, you should ensure the set of instances provided are the same. Note that depending on when the job is submitted, your results may vary</td></tr><tr><td>If cluster scaling is enabled, does each deployment model have the same scaling configurations. (min, max)</td><td>ğŸ”²</td><td>The efficiency of scaling between deployment models and vendors can differ but the configurations as it relates to compute should be consistent</td></tr><tr><td>Is the EMR cluster or image using the latest EMR version?</td><td>ğŸ”²</td><td>The latest versions of EMR will contain the best runtime performance</td></tr><tr><td>Are the Application versions the same across deployment models, OSS and vendors?</td><td>ğŸ”²</td><td>Spark versions should be the same or the latest version that&#x27;s offered</td></tr><tr><td>Is the same data catalog being used across benchmarks?</td><td>ğŸ”²</td><td>Performance between local and remote hivemetastore and glue data catalog can differ</td></tr><tr><td>Is the infrastructure being deployed in the same AZ?</td><td>ğŸ”²</td><td>AZ&#x27;s may have differences in network latency or instance availability.</td></tr><tr><td>Are the benchmarks starting from the same state and size. For example, cold start vs warm pool and the # of starting instances</td><td>ğŸ”²</td><td>Initializing compute resources impact price-performance. When comparing benchmarking, ensure applications are starting from the same state</td></tr><tr><td>Is the amount and type of local disk consistent?</td><td>ğŸ”²</td><td>Size and type of local disk volumes impact workloads, especially shuffle heavy ones</td></tr><tr><td>Are the security settings consistent across deployment models ?  This includes IAM role, security groups, data and in transit encryption</td><td>ğŸ”²</td><td>Security configurations such as encryption can impact performance</td></tr><tr><td>Are network settings consistent across deployment models?</td><td>ğŸ”²</td><td>This includes VPC endpoints, NAT Gateways, public or private endpoints, or proxies. The flow of network traffic to access storage, catalog or endpoints impacts performance</td></tr><tr><td>Are there differences in the AMI, bootstrap actions or container Image?</td><td>ğŸ”²</td><td>This can impact compute initialization as well as job startup. For example, eliminating the need to load a specific library before executing the job</td></tr><tr><td>Are JDK settings consistent across deployment models</td><td>ğŸ”²</td><td>We&#x27;ve seen improved performance with JDK17. Ensure the versions are consistent across benchmarks</td></tr></tbody></table>
<p>##Workload Checklist**</p>
<table><thead><tr><th>Checklist</th><th></th><th>Notes</th></tr></thead><tbody><tr><td>Is the input and output data the same (size, location, type, structure)?</td><td>ğŸ”²</td><td>As a best practice, all benchmark runs should point to the same input data set</td></tr><tr><td>Are the applications being submitted the same?</td><td>ğŸ”²</td><td>SQL file or application should be the same</td></tr><tr><td>Are the applications libraries the same?</td><td>ğŸ”²</td><td>This includes external libraries, python versions, or anything the application requires to run</td></tr><tr><td>Are the applications parameters the same?</td><td>ğŸ”²</td><td>These are application specific parameters passed in the job. These should be identical to ensure the same job is running</td></tr><tr><td>Are the applications configurations the same?</td><td>ğŸ”²</td><td>This refers to Spark configuration settings such as executor size, shuffle partitions or Dynamic Resource Allocation settings</td></tr><tr><td>Is EMR using EMRFS library to write to S3</td><td>ğŸ”²</td><td>To take advantage of EMR&#x27;s optimized run time, EMRFS (s3://) should be used. s3a is not supported and should only be used in OSS</td></tr><tr><td>If an Open Table Format (OTF) is being used, is it consistent across benchmarks</td><td>ğŸ”²</td><td>Using OTF&#x27;s can improve read, write and processing performance.</td></tr><tr><td>Is the application running in isolation?</td><td>ğŸ”²</td><td>Resource contention can impact benchmark results because Spark workloads will run on any resource that is available. A best practice is to run each job independently. Also ensure that if submitting multiple jobs, jobs are submitted in the same sequence or sequentially.</td></tr><tr><td>Is there any data or library caching that impacts future runs?</td><td>ğŸ”²</td><td>Generally, the first run will be slower than future runs because of caching. Keep this in mind when determining how many iterations of a run you want to do. Additional runs will negate any impact of caching but has a trade off of cost and time</td></tr><tr><td>Is the applications JVM settings the same?</td><td>ğŸ”²</td><td>Performance is different across JDK version. JDK17 has seen to have the best performance. JVM settings also extend to GC settings.</td></tr><tr><td>Is the applications logging configurations the same?</td><td>ğŸ”²</td><td>Logging parameters that are not the same such as level (DEBUG, INFO) can impact performance or storage requirements</td></tr><tr><td>Are the applications being submitted the same way?</td><td>ğŸ”²</td><td>Ensure the entry point for job submission is the same. There are many ways to submit spark jobs such as EMR APIs, Livy, Airflow, Spark-submit. These can result in differences with how jobs are run</td></tr></tbody></table></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/benchmarks/Running/benchmarking_checklist.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/aws-open-data-analytics/docs/benchmarks/Analyzing/retrieve_event_logs"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Retrieving Spark Event Logs</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/aws-open-data-analytics/docs/benchmarks/Running/setting_up_environment"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Setting Up Your Environment</div></a></nav></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Get Involved</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://aws.github.io/aws-emr-best-practices/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Built with â¤ï¸ at AWS  <br> Â© 2024 Amazon.com, Inc. or its affiliates. All Rights Reserved</div></div></div></footer></div>
</body>
</html>